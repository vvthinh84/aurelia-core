<template>
  
  <section>

    <h3 style="margin-bottom: 30px;"><b>TRA CỨU HÀNG TỒN</b></h3>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Lọc</h3>
      </div>
      <div class="panel-body" style="margin-left: 0px; ">

        <!--FORM-->
        <div class="container-fluid">
          <form>
            <div class="row">
              <!-- COL 1 -->
              <div class="col-xs-12 col-sm-6 col-md-4">

                <div class="form-group">
                  <label for="">Nhập Mã Sản phẩm:</label>
                  <input type="text" class="form-control" value.bind="SanPham.Products" model.bind="SanPham.Products" placeholder='(Cách nhau dấu "," hoặc " ")'>
                </div>

              </div>

              <!-- END COL 1 -->
              <!-- COL 2 -->
              <div class="col-xs-12 col-sm-6 col-md-4">
                <div class="form-group">
                  <label for="">Nhập Mã Chi nhánh:</label>
                  <input type="text" class="form-control" value.bind="SanPham.Stores" ref="filterStoreCode" placeholder="Nhập Mã Chi nhánh">
                </div>

              </div>
              <!-- END COL 2 -->
              <!-- COL 3 -->
              <div class="col-xs-12 col-sm-6 col-md-4">
                <div class="form-group">
                  <div class="row">

                  </div>
                </div>

                <div class="form-group">
                  <div class="row">
                    <div class="col-xs-6">

                    </div>
                    <div class="col-xs-3">
                      <button type="submit" class="btn btn-success" click.delegate="SearchLienHe()">
                            <span class="glyphicon glyphicon-search" ></span> Tìm kiếm
                          </button>


                    </div>
                    <div class="col-xs-3">
                      <a id="test" class="btn btn-primary" click.delegate="download()"> Xuất EXCEL </a>
                    </div>


                  </div>
                </div>
                <!-- END COL 3 -->
              </div>
          </form>
          </div>




        </div>
      </div>
    </div>

    <!--Table-->
    <!-- The Modal -->


    <div class="panel panel-default">
      <div class="panel-heading"><b>Kết quả tìm kiếm</b></div>
      <div class="panel-body">
        <div class="row">
          <div class="form-group col-md-8">

            <div class="form-group col-md-4">
              <div class="row">
                <span class="glyphicon glyphicon-filter">Lọc:</span> <input type="text" class="form-control" ref="filterListProductCode"
                  placeholder="Nhập danh sách sản phẩm">
              </div>
            </div>

            <div class="splash" if.bind="!pendding" style=" margin-top: -40%;">
              <i class="fa fa-spinner fa-pulse" style="
                  margin-top: 39%;
                  margin-left: 50%;
              "></i>
            </div>
          </div>
          <div class="form-group col-md-4">
            <label class="col">Tổng số record: </label>
            <span style="color:blue">${GiftDN.items | toToTalSoLuong}</span>
            <label class="col">Tổng số lượng tồn: </label>
            <span style="color:blue"> ${GiftDN.items |toTotalAmount}</span>
          </div>
        </div>

        <div class="table-responsive">
          <table id="tableGifts" class="table table-bordered">
            <thead style="font-weight: bold;">
              <tr>
                <td>STT</td>
                <td>Mã code</td>
                <td>Mã sản phẩm</td>
                <td>Sản phẩm</td>
                <td>Mã màu</td>
                <td>Màu</td>
                <td>Tồn thực tế</td>
                <td>Mã Chi nhánh</td>
                <td>Chi nhánh</td>
              </tr>
            </thead>
            <tbody ref="GiftDN" items.bind="ListDN | filterByProductColor: filterListProductCode.value">
              <!--<tbody ref="GiftDN" items.bind="ListDN | filterByProductColor:filterListProductCode.value  | filterByStroreCode:filterStoreCode.value" >-->
              <tr repeat.for="DN of GiftDN.items | takeFromTo: (current-1)* (itemperpage):current * (itemperpage)">

                <td> ${(current-1)*20+$index+1}</td>
                <td>${DN.ProductCode}</td>
                <td>${DN.ProductId }</td>
                <td>${DN.ProductName}</td>
                <td>${DN.ProductColorCode}</td>
                <td>${DN.ColorName}</td>
                <td>${DN.Tonthucte}</td>
                <td>${DN.StoreCode}</td>
                <td>${DN.StoreName}</td>


              </tr>
              <tr if.bind="GiftDN.items.length > 0">
                <td colspan="9">
                  <pagination page-size.bind="pagesize" total.bind="GiftDN.items.length" item-per-page.bind="itemperpage" current-page.bind="current"></pagination>
                </td>
              </tr>
              <tr if.bind="!ListDN || GiftDN.items.length <= 0">
                <td colspan="9">
                  Không tìm thấy hàng tồn.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>


  </section>
  <style>
    span.select2-container {
        width: 100% !important;
      }

      .select2-container .select2-selection--single {
        height: 34px !important;
      }
      .form-inline .form-control {
          width: 100% !important;
      }
      .select2-container--default .select2-selection--single {
        border: 1px solid #ccc !important;
      }

    </style>
</template>